<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Task Wizard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .task-item:hover .task-actions {
            opacity: 1;
        }
        
        .checkbox-container input:checked ~ .checkmark {
            background-color: #3b82f6;
            border-color: #3b82f6;
        }
        
        .checkbox-container input:checked ~ .checkmark:after {
            display: block;
        }
        
        .checkbox-container .checkmark:after {
            left: 5px;
            top: 1px;
            width: 5px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <!-- Main Container -->
    <div class="container mx-auto p-4 max-w-4xl">
        <!-- Modal Trigger Button (for demo) -->
        <button id="openModal" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg shadow-md transition-all duration-200 flex items-center">
            <i class="fas fa-magic mr-2"></i> Open AI Task Wizard
        </button>
        
        <!-- AI Task Wizard Modal -->
        <div id="aiWizardModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
            <div class="bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col">
                <!-- Modal Header -->
                <div class="bg-gradient-to-r from-blue-600 to-indigo-700 p-5 text-white">
                    <div class="flex justify-between items-center">
                        <div>
                            <h2 class="text-2xl font-bold flex items-center">
                                <i class="fas fa-robot mr-3"></i> AI Task Wizard
                            </h2>
                            <p class="text-blue-100 mt-1">Let AI help break down your project into actionable tasks</p>
                        </div>
                        <button id="closeModal" class="text-blue-100 hover:text-white">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Modal Content -->
                <div class="flex-1 overflow-y-auto p-6">
                    <!-- Input Section -->
                    <div id="inputSection">
                        <div class="space-y-5">
                            <!-- Project Context -->
                            <div>
                                <label for="projectContext" class="block text-sm font-medium text-gray-700 mb-1">Project Context</label>
                                <textarea id="projectContext" rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="Describe your project goals, current status, and any relevant background..."></textarea>
                            </div>
                            
                            <!-- Feature Description -->
                            <div>
                                <label for="featureDescription" class="block text-sm font-medium text-gray-700 mb-1">Feature/Work Description</label>
                                <textarea id="featureDescription" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="What specific feature or work item do you want to break down into tasks?"></textarea>
                            </div>
                            
                            <!-- Scope -->
                            <div>
                                <label for="scope" class="block text-sm font-medium text-gray-700 mb-1">Scope</label>
                                <select id="scope" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                                    <option value="high-level">High-level tasks only</option>
                                    <option value="detailed" selected>Detailed tasks with subtasks</option>
                                    <option value="very-detailed">Very detailed breakdown</option>
                                </select>
                            </div>
                            
                            <!-- Priority Rules -->
                            <div>
                                <label for="priorityRules" class="block text-sm font-medium text-gray-700 mb-1">Priority Rules</label>
                                <input type="text" id="priorityRules" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="E.g.: Must complete X before Y, Critical path items first...">
                            </div>
                            
                            <!-- Generate Button -->
                            <div class="pt-2">
                                <button id="generateTasks" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg shadow-md transition-all duration-200 flex items-center justify-center">
                                    <i class="fas fa-bolt mr-2"></i> Generate Tasks
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Results Section (initially hidden) -->
                    <div id="resultsSection" class="hidden">
                        <div class="flex justify-between items-center mb-5">
                            <h3 class="text-lg font-semibold text-gray-800">Suggested Task Breakdown</h3>
                            <button id="backToInput" class="text-blue-600 hover:text-blue-800 flex items-center text-sm">
                                <i class="fas fa-arrow-left mr-1"></i> Edit Input
                            </button>
                        </div>
                        
                        <!-- Task List -->
                        <div id="taskList" class="space-y-3">
                            <!-- Tasks will be inserted here by JavaScript -->
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="mt-8 flex flex-col sm:flex-row justify-between space-y-3 sm:space-y-0 sm:space-x-4">
                            <button id="regenerateTasks" class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-2 rounded-lg shadow transition-all duration-200 flex items-center justify-center">
                                <i class="fas fa-sync-alt mr-2"></i> Regenerate
                            </button>
                            <button id="insertToBoard" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg shadow transition-all duration-200 flex items-center justify-center">
                                <i class="fas fa-tasks mr-2"></i> Insert to Board
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Modal Footer -->
                <div class="bg-gray-50 p-4 border-t border-gray-200 text-center text-sm text-gray-500">
                    <p>AI suggestions may require human review. Always verify critical tasks.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample task data for demonstration
        const sampleTasks = [
            {
                id: 1,
                title: "Design user authentication flow",
                description: "Create wireframes and user flow diagrams for login, registration, and password recovery",
                subtasks: [
                    "Sketch login screen options",
                    "Design registration form layout",
                    "Create password recovery flow",
                    "Review with UX team"
                ],
                priority: "High",
                estimatedTime: "4 hours"
            },
            {
                id: 2,
                title: "Implement backend authentication API",
                description: "Develop REST endpoints for user authentication processes",
                subtasks: [
                    "Set up user model in database",
                    "Create JWT token generation",
                    "Implement password hashing",
                    "Write unit tests"
                ],
                priority: "High",
                estimatedTime: "8 hours"
            },
            {
                id: 3,
                title: "Build frontend authentication components",
                description: "Develop React components for all authentication screens",
                subtasks: [
                    "Create login form component",
                    "Build registration form",
                    "Implement password reset UI",
                    "Add form validation"
                ],
                priority: "Medium",
                estimatedTime: "6 hours"
            },
            {
                id: 4,
                title: "Write documentation",
                description: "Document authentication flow for developers and end-users",
                subtasks: [
                    "API endpoint documentation",
                    "Frontend component usage guide",
                    "User manual for auth features"
                ],
                priority: "Low",
                estimatedTime: "3 hours"
            }
        ];

        // DOM Elements
        const modal = document.getElementById('aiWizardModal');
        const openModalBtn = document.getElementById('openModal');
        const closeModalBtn = document.getElementById('closeModal');
        const inputSection = document.getElementById('inputSection');
        const resultsSection = document.getElementById('resultsSection');
        const generateTasksBtn = document.getElementById('generateTasks');
        const backToInputBtn = document.getElementById('backToInput');
        const regenerateTasksBtn = document.getElementById('regenerateTasks');
        const insertToBoardBtn = document.getElementById('insertToBoard');
        const taskList = document.getElementById('taskList');

        // Event Listeners
        openModalBtn.addEventListener('click', () => {
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        });

        closeModalBtn.addEventListener('click', () => {
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        });

        generateTasksBtn.addEventListener('click', () => {
            // In a real app, you would send the input data to an AI API here
            // For demo, we'll use sample data
            renderTasks(sampleTasks);
            inputSection.classList.add('hidden');
            resultsSection.classList.remove('hidden');
        });

        backToInputBtn.addEventListener('click', () => {
            resultsSection.classList.add('hidden');
            inputSection.classList.remove('hidden');
        });

        regenerateTasksBtn.addEventListener('click', () => {
            // Show loading state
            taskList.innerHTML = `
                <div class="text-center py-10">
                    <i class="fas fa-circle-notch fa-spin text-blue-500 text-2xl mb-2"></i>
                    <p class="text-gray-600">AI is generating new task suggestions...</p>
                </div>
            `;
            
            // Simulate API call delay
            setTimeout(() => {
                // For demo, we'll just shuffle the sample tasks
                const shuffledTasks = [...sampleTasks].sort(() => 0.5 - Math.random());
                renderTasks(shuffledTasks);
            }, 1500);
        });

        insertToBoardBtn.addEventListener('click', () => {
            // Get all checked tasks
            const checkedTasks = [];
            document.querySelectorAll('.task-checkbox:checked').forEach(checkbox => {
                const taskId = checkbox.getAttribute('data-task-id');
                const task = sampleTasks.find(t => t.id == taskId);
                if (task) checkedTasks.push(task);
            });
            
            // In a real app, you would send these to your task management system
            alert(`Inserted ${checkedTasks.length} tasks to your board!`);
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        });

        // Render tasks to the DOM
        function renderTasks(tasks) {
            taskList.innerHTML = '';
            
            if (tasks.length === 0) {
                taskList.innerHTML = '<p class="text-gray-500 text-center py-6">No tasks generated. Try adjusting your input.</p>';
                return;
            }
            
            tasks.forEach(task => {
                const taskElement = document.createElement('div');
                taskElement.className = 'bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-all duration-200 fade-in';
                taskElement.innerHTML = `
                    <div class="flex items-start">
                        <label class="checkbox-container flex items-start mr-3">
                            <input type="checkbox" class="task-checkbox absolute opacity-0" data-task-id="${task.id}">
                            <span class="checkmark border border-gray-300 rounded mt-1 w-5 h-5 flex-shrink-0"></span>
                        </label>
                        <div class="flex-1">
                            <div class="flex justify-between items-start">
                                <h4 class="font-medium text-gray-800">${task.title}</h4>
                                <span class="text-xs px-2 py-1 rounded-full ${task.priority === 'High' ? 'bg-red-100 text-red-800' : task.priority === 'Medium' ? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'}">
                                    ${task.priority} priority
                                </span>
                            </div>
                            <p class="text-sm text-gray-600 mt-1">${task.description}</p>
                            
                            ${task.subtasks && task.subtasks.length > 0 ? `
                                <div class="mt-3 pl-4 border-l-2 border-gray-100">
                                    <p class="text-xs font-medium text-gray-500 mb-1">SUBTASKS</p>
                                    <ul class="space-y-2">
                                        ${task.subtasks.map(subtask => `
                                            <li class="flex items-start">
                                                <span class="inline-block w-2 h-2 rounded-full bg-gray-300 mt-1.5 mr-2"></span>
                                                <span class="text-sm text-gray-700">${subtask}</span>
                                            </li>
                                        `).join('')}
                                    </ul>
                                </div>
                            ` : ''}
                            
                            <div class="mt-3 flex items-center text-xs text-gray-500">
                                <i class="far fa-clock mr-1"></i> ${task.estimatedTime}
                            </div>
                        </div>
                    </div>
                `;
                taskList.appendChild(taskElement);
            });
            
            // Add event listeners to checkboxes
            document.querySelectorAll('.task-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const taskItem = this.closest('.bg-white');
                    if (this.checked) {
                        taskItem.classList.add('ring-2', 'ring-blue-500');
                    } else {
                        taskItem.classList.remove('ring-2', 'ring-blue-500');
                    }
                });
            });
        }

        // Close modal when clicking outside
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }
        });
    </script>
</body>
</html>