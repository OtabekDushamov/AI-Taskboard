<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Detail View</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom styles for rich text editor and other elements */
        .rich-text {
            min-height: 150px;
            border: 1px solid #e2e8f0;
            border-radius: 0.375rem;
            padding: 0.75rem;
        }
        .rich-text:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 1px #3b82f6;
        }
        .attachment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 0.75rem;
        }
        .timeline-item:not(:last-child)::after {
            content: '';
            position: absolute;
            left: 11px;
            top: 24px;
            height: calc(100% - 24px);
            width: 2px;
            background-color: #e2e8f0;
        }
        .mention {
            background-color: #dbeafe;
            color: #1d4ed8;
            padding: 0 2px;
            border-radius: 3px;
        }
        @media (max-width: 768px) {
            .sticky-action-bar {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                background: white;
                padding: 0.75rem;
                box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
                z-index: 50;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto px-4 py-6 max-w-6xl">
        <!-- Header Section -->
        <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
            <div class="flex flex-wrap items-center justify-between gap-4 mb-4">
                <div class="flex-1 min-w-[200px]">
                    <h1 id="task-title" class="text-2xl font-bold text-gray-800 border-b border-transparent hover:border-gray-300 px-1 py-1 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500" contenteditable="true">Complete project dashboard redesign</h1>
                </div>
                
                <div class="flex items-center gap-3 flex-wrap">
                    <div class="relative">
                        <select id="status-dropdown" class="appearance-none bg-gray-100 border border-gray-300 rounded-md py-2 pl-3 pr-8 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="todo">To Do</option>
                            <option value="in-progress" selected>In Progress</option>
                            <option value="review">In Review</option>
                            <option value="done">Done</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                            <i class="fas fa-chevron-down text-xs"></i>
                        </div>
                    </div>
                    
                    <div class="flex items-center gap-1">
                        <button id="priority-btn" class="flex items-center gap-1 bg-gray-100 hover:bg-gray-200 px-3 py-2 rounded-md text-sm font-medium">
                            <span class="w-3 h-3 rounded-full bg-yellow-500"></span>
                            <span>Medium</span>
                            <i class="fas fa-chevron-down text-xs ml-1"></i>
                        </button>
                        <div id="priority-menu" class="hidden absolute mt-2 w-40 bg-white rounded-md shadow-lg z-10 border border-gray-200">
                            <div class="py-1">
                                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-priority="low">
                                    <span class="w-2 h-2 rounded-full bg-green-500 inline-block mr-2"></span>Low
                                </a>
                                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-priority="medium">
                                    <span class="w-2 h-2 rounded-full bg-yellow-500 inline-block mr-2"></span>Medium
                                </a>
                                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-priority="high">
                                    <span class="w-2 h-2 rounded-full bg-red-500 inline-block mr-2"></span>High
                                </a>
                                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-priority="critical">
                                    <span class="w-2 h-2 rounded-full bg-purple-500 inline-block mr-2"></span>Critical
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex items-center gap-2">
                        <i class="fas fa-calendar-alt text-gray-400"></i>
                        <input type="date" class="border border-gray-300 rounded-md py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" value="2023-07-15">
                    </div>
                    
                    <button class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center gap-2">
                        <i class="fas fa-check"></i>
                        <span>Complete</span>
                    </button>
                </div>
            </div>
            
            <div class="flex flex-wrap gap-4 text-sm text-gray-600">
                <div class="flex items-center gap-1">
                    <i class="fas fa-user-circle text-gray-400"></i>
                    <span>Created by <span class="font-medium">Alex Johnson</span></span>
                </div>
                <div class="flex items-center gap-1">
                    <i class="fas fa-clock text-gray-400"></i>
                    <span>Updated 2 hours ago</span>
                </div>
                <div class="flex items-center gap-1">
                    <i class="fas fa-id-badge text-gray-400"></i>
                    <span>PROJ-124</span>
                </div>
            </div>
        </div>
        
        <div class="flex flex-col lg:flex-row gap-6">
            <!-- Left Column -->
            <div class="lg:w-2/3">
                <!-- Description -->
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h2 class="text-lg font-semibold text-gray-800 mb-4">Description</h2>
                    <div class="rich-text" contenteditable="true">
                        <p>Redesign the project dashboard to improve user experience and add new analytics features.</p>
                        <p><br></p>
                        <p><strong>Requirements:</strong></p>
                        <ul>
                            <li>Modern, clean interface</li>
                            <li>Performance metrics section</li>
                            <li>Team workload visualization</li>
                            <li>Responsive design for all devices</li>
                        </ul>
                        <p><br></p>
                        <p>Please coordinate with <span class="mention">@sarah_design</span> for UI assets.</p>
                    </div>
                </div>
                
                <!-- Checklist -->
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-lg font-semibold text-gray-800">Checklist</h2>
                        <button class="text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center gap-1">
                            <i class="fas fa-plus"></i>
                            <span>Add item</span>
                        </button>
                    </div>
                    
                    <div class="mb-3">
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: 60%"></div>
                        </div>
                        <div class="text-xs text-gray-500 mt-1">3 of 5 tasks completed</div>
                    </div>
                    
                    <div class="space-y-2">
                        <div class="flex items-start">
                            <input type="checkbox" checked class="mt-1 h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500">
                            <label class="ml-2 text-gray-700 line-through">Gather requirements</label>
                        </div>
                        <div class="flex items-start">
                            <input type="checkbox" checked class="mt-1 h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500">
                            <label class="ml-2 text-gray-700 line-through">Create wireframes</label>
                        </div>
                        <div class="flex items-start">
                            <input type="checkbox" checked class="mt-1 h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500">
                            <label class="ml-2 text-gray-700 line-through">Design mockups</label>
                        </div>
                        <div class="flex items-start">
                            <input type="checkbox" class="mt-1 h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500">
                            <label class="ml-2 text-gray-700">Implement frontend components</label>
                        </div>
                        <div class="flex items-start">
                            <input type="checkbox" class="mt-1 h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500">
                            <label class="ml-2 text-gray-700">Test responsive behavior</label>
                        </div>
                    </div>
                </div>
                
                <!-- Attachments -->
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-lg font-semibold text-gray-800">Attachments</h2>
                        <button class="text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center gap-1">
                            <i class="fas fa-plus"></i>
                            <span>Add file</span>
                        </button>
                    </div>
                    
                    <div class="attachment-grid">
                        <div class="border rounded-lg overflow-hidden group">
                            <div class="h-24 bg-gray-100 flex items-center justify-center">
                                <i class="fas fa-file-image text-3xl text-gray-400"></i>
                            </div>
                            <div class="p-2">
                                <p class="text-sm font-medium truncate">design-mockup-v1.jpg</p>
                                <p class="text-xs text-gray-500">2.4 MB</p>
                            </div>
                        </div>
                        <div class="border rounded-lg overflow-hidden group">
                            <div class="h-24 bg-gray-100 flex items-center justify-center">
                                <i class="fas fa-file-pdf text-3xl text-gray-400"></i>
                            </div>
                            <div class="p-2">
                                <p class="text-sm font-medium truncate">requirements.pdf</p>
                                <p class="text-xs text-gray-500">1.1 MB</p>
                            </div>
                        </div>
                        <div class="border rounded-lg overflow-hidden group">
                            <div class="h-24 bg-gray-100 flex items-center justify-center">
                                <i class="fas fa-file-word text-3xl text-gray-400"></i>
                            </div>
                            <div class="p-2">
                                <p class="text-sm font-medium truncate">content-guide.docx</p>
                                <p class="text-xs text-gray-500">350 KB</p>
                            </div>
                        </div>
                        <div class="border rounded-lg overflow-hidden group">
                            <div class="h-24 bg-gray-100 flex items-center justify-center">
                                <i class="fas fa-file-excel text-3xl text-gray-400"></i>
                            </div>
                            <div class="p-2">
                                <p class="text-sm font-medium truncate">analytics-data.xlsx</p>
                                <p class="text-xs text-gray-500">780 KB</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Comments -->
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h2 class="text-lg font-semibold text-gray-800 mb-4">Comments</h2>
                    
                    <div class="mb-6">
                        <div class="flex items-start gap-3 mb-4">
                            <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="User" class="w-8 h-8 rounded-full">
                            <div class="flex-1">
                                <div class="bg-gray-50 rounded-lg p-3">
                                    <div class="flex justify-between items-start mb-1">
                                        <span class="font-medium text-sm">Sarah Miller</span>
                                        <span class="text-xs text-gray-500">2 hours ago</span>
                                    </div>
                                    <p class="text-sm text-gray-700">I've uploaded the latest design mockups. Let me know if you need any changes. Also, <span class="mention">@dev_mike</span> can you check the technical feasibility of the animations?</p>
                                </div>
                                <div class="flex items-center gap-2 mt-2 ml-2">
                                    <button class="text-xs text-gray-500 hover:text-gray-700">Reply</button>
                                    <button class="text-xs text-gray-500 hover:text-gray-700">Edit</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start gap-3 mb-4 ml-11">
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="User" class="w-8 h-8 rounded-full">
                            <div class="flex-1">
                                <div class="bg-gray-50 rounded-lg p-3">
                                    <div class="flex justify-between items-start mb-1">
                                        <span class="font-medium text-sm">Mike Chen</span>
                                        <span class="text-xs text-gray-500">1 hour ago</span>
                                    </div>
                                    <p class="text-sm text-gray-700">Thanks <span class="mention">@sarah_miller</span>, the animations look good. We might need to optimize the performance for mobile devices though.</p>
                                </div>
                                <div class="flex items-center gap-2 mt-2 ml-2">
                                    <button class="text-xs text-gray-500 hover:text-gray-700">Reply</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex items-start gap-3">
                        <img src="https://randomuser.me/api/portraits/men/22.jpg" alt="User" class="w-8 h-8 rounded-full">
                        <div class="flex-1">
                            <div class="border rounded-lg overflow-hidden">
                                <div class="rich-text p-3 text-sm" contenteditable="true" data-placeholder="Write a comment..."></div>
                                <div class="bg-gray-50 px-3 py-2 flex justify-between items-center">
                                    <div class="flex items-center gap-2">
                                        <button class="text-gray-500 hover:text-gray-700">
                                            <i class="far fa-smile"></i>
                                        </button>
                                        <button class="text-gray-500 hover:text-gray-700">
                                            <i class="fas fa-at"></i>
                                        </button>
                                        <button class="text-gray-500 hover:text-gray-700">
                                            <i class="fas fa-paperclip"></i>
                                        </button>
                                    </div>
                                    <button class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm font-medium">
                                        Comment
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Right Column -->
            <div class="lg:w-1/3">
                <!-- Metadata -->
                <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h2 class="text-lg font-semibold text-gray-800 mb-4">Task Details</h2>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-xs font-medium text-gray-500 uppercase tracking-wider mb-1">Project</label>
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 rounded-full bg-indigo-500"></div>
                                <span class="text-sm font-medium">Website Redesign</span>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-xs font-medium text-gray-500 uppercase tracking-wider mb-1">Category</label>
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">UI/UX</span>
                        </div>
                        
                        <div>
                            <label class="block text-xs font-medium text-gray-500 uppercase tracking-wider mb-1">Assignees</label>
                            <div class="flex flex-wrap gap-2">
                                <div class="flex items-center">
                                    <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="User" class="w-6 h-6 rounded-full mr-1">
                                    <span class="text-sm">Sarah</span>
                                </div>
                                <div class="flex items-center">
                                    <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="User" class="w-6 h-6 rounded-full mr-1">
                                    <span class="text-sm">Mike</span>
                                </div>
                                <button class="text-blue-600 hover:text-blue-800 text-sm flex items-center">
                                    <i class="fas fa-plus text-xs mr-1"></i>
                                    <span>Add</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-xs font-medium text-gray-500 uppercase tracking-wider mb-1">Estimate</label>
                                <div class="flex items-center gap-1">
                                    <input type="number" class="w-16 border border-gray-300 rounded-md py-1 px-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" value="8">
                                    <span class="text-sm text-gray-600">hours</span>
                                </div>
                            </div>
                            <div>
                                <label class="block text-xs font-medium text-gray-500 uppercase tracking-wider mb-1">Actual</label>
                                <div class="flex items-center gap-1">
                                    <input type="number" class="w-16 border border-gray-300 rounded-md py-1 px-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" value="5">
                                    <span class="text-sm text-gray-600">hours</span>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-xs font-medium text-gray-500 uppercase tracking-wider mb-1">Labels</label>
                            <div class="flex flex-wrap gap-1">
                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800">Design</span>
                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800">Frontend</span>
                                <button class="text-blue-600 hover:text-blue-800 text-sm flex items-center">
                                    <i class="fas fa-plus text-xs mr-1"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="pt-4 border-t border-gray-200">
                            <div class="flex justify-between text-sm mb-1">
                                <span class="text-gray-500">Created</span>
                                <span class="text-gray-700">Jun 28, 2023</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-500">Updated</span>
                                <span class="text-gray-700">Jul 12, 2023</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Status History -->
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h2 class="text-lg font-semibold text-gray-800 mb-4">Activity</h2>
                    
                    <div class="space-y-4">
                        <div class="relative timeline-item pl-6">
                            <div class="absolute left-0 top-0 w-4 h-4 rounded-full bg-blue-500 border-4 border-blue-100"></div>
                            <div class="text-sm">
                                <div class="font-medium">Status changed to In Progress</div>
                                <div class="text-gray-500 text-xs">Jul 10, 2023 • Mike Chen</div>
                            </div>
                        </div>
                        
                        <div class="relative timeline-item pl-6">
                            <div class="absolute left-0 top-0 w-4 h-4 rounded-full bg-gray-400 border-4 border-gray-100"></div>
                            <div class="text-sm">
                                <div class="font-medium">Task assigned to Sarah Miller</div>
                                <div class="text-gray-500 text-xs">Jul 5, 2023 • Alex Johnson</div>
                            </div>
                        </div>
                        
                        <div class="relative timeline-item pl-6">
                            <div class="absolute left-0 top-0 w-4 h-4 rounded-full bg-yellow-400 border-4 border-yellow-100"></div>
                            <div class="text-sm">
                                <div class="font-medium">Status changed to To Do</div>
                                <div class="text-gray-500 text-xs">Jul 3, 2023 • Alex Johnson</div>
                            </div>
                        </div>
                        
                        <div class="relative timeline-item pl-6">
                            <div class="absolute left-0 top-0 w-4 h-4 rounded-full bg-gray-400 border-4 border-gray-100"></div>
                            <div class="text-sm">
                                <div class="font-medium">Task created</div>
                                <div class="text-gray-500 text-xs">Jun 28, 2023 • Alex Johnson</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Mobile Action Bar -->
    <div class="lg:hidden sticky-action-bar">
        <div class="flex justify-between items-center">
            <button class="flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 text-gray-700">
                <i class="fas fa-ellipsis-h"></i>
            </button>
            <button class="flex-1 mx-2 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md text-sm font-medium flex items-center justify-center gap-2">
                <i class="fas fa-check"></i>
                <span>Complete</span>
            </button>
            <button class="flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 text-gray-700">
                <i class="fas fa-comment"></i>
            </button>
        </div>
    </div>
    
    <script>
        // Priority dropdown functionality
        const priorityBtn = document.getElementById('priority-btn');
        const priorityMenu = document.getElementById('priority-menu');
        
        priorityBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            priorityMenu.classList.toggle('hidden');
        });
        
        document.addEventListener('click', function() {
            priorityMenu.classList.add('hidden');
        });
        
        // Handle priority selection
        const priorityOptions = priorityMenu.querySelectorAll('a');
        priorityOptions.forEach(option => {
            option.addEventListener('click', function(e) {
                e.preventDefault();
                const priority = this.getAttribute('data-priority');
                let color, text;
                
                switch(priority) {
                    case 'low':
                        color = 'bg-green-500';
                        text = 'Low';
                        break;
                    case 'medium':
                        color = 'bg-yellow-500';
                        text = 'Medium';
                        break;
                    case 'high':
                        color = 'bg-red-500';
                        text = 'High';
                        break;
                    case 'critical':
                        color = 'bg-purple-500';
                        text = 'Critical';
                        break;
                }
                
                priorityBtn.innerHTML = `
                    <span class="w-3 h-3 rounded-full ${color}"></span>
                    <span>${text}</span>
                    <i class="fas fa-chevron-down text-xs ml-1"></i>
                `;
                
                priorityMenu.classList.add('hidden');
            });
        });
        
        // Handle task title editing
        const taskTitle = document.getElementById('task-title');
        let originalTitle = taskTitle.textContent;
        
        taskTitle.addEventListener('blur', function() {
            if(this.textContent.trim() === '') {
                this.textContent = originalTitle;
            } else {
                originalTitle = this.textContent;
            }
        });
        
        // Handle checklist items
        const checklistItems = document.querySelectorAll('.flex.items-start input[type="checkbox"]');
        checklistItems.forEach(item => {
            item.addEventListener('change', function() {
                const label = this.nextElementSibling;
                if(this.checked) {
                    label.classList.add('line-through');
                    label.classList.add('text-gray-400');
                } else {
                    label.classList.remove('line-through');
                    label.classList.remove('text-gray-400');
                }
                
                // Update progress (in a real app, this would be more dynamic)
                const checkedItems = document.querySelectorAll('.flex.items-start input[type="checkbox"]:checked').length;
                const totalItems = checklistItems.length;
                const progress = (checkedItems / totalItems) * 100;
                
                document.querySelector('.bg-green-500').style.width = `${progress}%`;
                document.querySelector('.text-xs.text-gray-500.mt-1').textContent = 
                    `${checkedItems} of ${totalItems} tasks completed`;
            });
        });
    </script>
</body>
</html>