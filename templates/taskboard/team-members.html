<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Members Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .role-pill {
            font-size: 0.75rem;
            font-weight: 600;
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
        }
        
        .dropdown-enter {
            opacity: 0;
            transform: scale(0.95);
        }
        .dropdown-enter-active {
            opacity: 1;
            transform: scale(1);
            transition: opacity 200ms, transform 200ms;
        }
        .dropdown-exit {
            opacity: 1;
        }
        .dropdown-exit-active {
            opacity: 0;
            transform: scale(0.95);
            transition: opacity 200ms, transform 200ms;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="max-w-6xl mx-auto px-4 py-8">
        <!-- Header -->
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8">
            <div>
                <h1 class="text-2xl font-bold text-gray-800">Team Members</h1>
                <p class="text-gray-600">Manage who has access to this workspace</p>
            </div>
            <button id="inviteButton" class="mt-4 sm:mt-0 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center">
                <i class="fas fa-user-plus mr-2"></i> Invite Member
            </button>
        </div>
        
        <!-- Invite Modal (hidden by default) -->
        <div id="inviteModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-lg p-6 w-full max-w-md fade-in">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">Invite Team Member</h3>
                    <button id="closeInviteModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-medium mb-2" for="email">Email Address</label>
                    <input type="email" id="email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="member@example.com">
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-medium mb-2">Role</label>
                    <div class="grid grid-cols-3 gap-2">
                        <button class="role-selector border rounded-md p-2 hover:bg-gray-50" data-role="admin">
                            <div class="text-xs font-semibold text-blue-600">Admin</div>
                            <div class="text-xs text-gray-500 mt-1">Full access</div>
                        </button>
                        <button class="role-selector border rounded-md p-2 hover:bg-gray-50" data-role="editor">
                            <div class="text-xs font-semibold text-purple-600">Editor</div>
                            <div class="text-xs text-gray-500 mt-1">Edit content</div>
                        </button>
                        <button class="role-selector border rounded-md p-2 hover:bg-gray-50" data-role="viewer">
                            <div class="text-xs font-semibold text-green-600">Viewer</div>
                            <div class="text-xs text-gray-500 mt-1">View only</div>
                        </button>
                    </div>
                </div>
                <div class="flex justify-end">
                    <button id="cancelInvite" class="mr-2 px-4 py-2 text-gray-600 hover:text-gray-800">Cancel</button>
                    <button id="sendInvite" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">Send Invite</button>
                </div>
            </div>
        </div>
        
        <!-- Confirmation Modal (hidden by default) -->
        <div id="confirmModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-lg p-6 w-full max-w-md fade-in">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold" id="confirmTitle">Confirm Action</h3>
                    <button id="closeConfirmModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <p class="text-gray-700 mb-6" id="confirmMessage">Are you sure you want to perform this action?</p>
                <div class="flex justify-end">
                    <button id="cancelConfirm" class="mr-2 px-4 py-2 text-gray-600 hover:text-gray-800">Cancel</button>
                    <button id="confirmAction" class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700">Confirm</button>
                </div>
            </div>
        </div>
        
        <!-- Transfer Ownership Modal (hidden by default) -->
        <div id="transferModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-lg p-6 w-full max-w-md fade-in">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">Transfer Ownership</h3>
                    <button id="closeTransferModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <p class="text-gray-700 mb-4">Select a new owner for this workspace:</p>
                <div class="mb-4 max-h-60 overflow-y-auto">
                    <ul id="transferCandidates">
                        <!-- Will be populated with JS -->
                    </ul>
                </div>
                <div class="flex justify-end">
                    <button id="cancelTransfer" class="mr-2 px-4 py-2 text-gray-600 hover:text-gray-800">Cancel</button>
                    <button id="confirmTransfer" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700" disabled>Transfer Ownership</button>
                </div>
            </div>
        </div>
        
        <!-- Members Table -->
        <div class="bg-white rounded-lg shadow overflow-hidden">
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Member</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Role</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Permissions</th>
                            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200" id="membersList">
                        <!-- Members will be populated here by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Empty state (hidden when members exist) -->
        <div id="emptyState" class="text-center py-12 hidden">
            <div class="mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4">
                <i class="fas fa-users text-gray-400 text-3xl"></i>
            </div>
            <h3 class="text-lg font-medium text-gray-900 mb-1">No team members yet</h3>
            <p class="text-gray-500 mb-6">Invite your first team member to get started</p>
            <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center mx-auto">
                <i class="fas fa-user-plus mr-2"></i> Invite Member
            </button>
        </div>
    </div>

    <script>
        // Sample data - in a real app, this would come from an API
        let members = [
            {
                id: 1,
                name: "You",
                email: "owner@example.com",
                avatar: "https://randomuser.me/api/portraits/men/32.jpg",
                role: "owner",
                status: "active",
                joined: "2023-01-15"
            },
            {
                id: 2,
                name: "Alex Johnson",
                email: "alex@example.com",
                avatar: "https://randomuser.me/api/portraits/women/44.jpg",
                role: "admin",
                status: "active",
                joined: "2023-02-20"
            },
            {
                id: 3,
                name: "Sam Wilson",
                email: "sam@example.com",
                avatar: "https://randomuser.me/api/portraits/men/75.jpg",
                role: "editor",
                status: "active",
                joined: "2023-03-10"
            },
            {
                id: 4,
                name: "Taylor Smith",
                email: "taylor@example.com",
                avatar: "https://randomuser.me/api/portraits/women/63.jpg",
                role: "viewer",
                status: "pending",
                joined: "2023-04-05"
            }
        ];

        // DOM elements
        const inviteButton = document.getElementById('inviteButton');
        const inviteModal = document.getElementById('inviteModal');
        const closeInviteModal = document.getElementById('closeInviteModal');
        const cancelInvite = document.getElementById('cancelInvite');
        const sendInvite = document.getElementById('sendInvite');
        const confirmModal = document.getElementById('confirmModal');
        const closeConfirmModal = document.getElementById('closeConfirmModal');
        const cancelConfirm = document.getElementById('cancelConfirm');
        const confirmAction = document.getElementById('confirmAction');
        const confirmTitle = document.getElementById('confirmTitle');
        const confirmMessage = document.getElementById('confirmMessage');
        const transferModal = document.getElementById('transferModal');
        const closeTransferModal = document.getElementById('closeTransferModal');
        const cancelTransfer = document.getElementById('cancelTransfer');
        const confirmTransfer = document.getElementById('confirmTransfer');
        const transferCandidates = document.getElementById('transferCandidates');
        const membersList = document.getElementById('membersList');
        const emptyState = document.getElementById('emptyState');
        const roleSelectors = document.querySelectorAll('.role-selector');
        
        // State variables
        let selectedRole = 'editor';
        let currentAction = null;
        let currentMemberId = null;
        let selectedTransferCandidate = null;

        // Initialize the page
        document.addEventListener('DOMContentLoaded', () => {
            renderMembers();
            
            // Set up event listeners
            inviteButton.addEventListener('click', () => {
                inviteModal.classList.remove('hidden');
            });
            
            closeInviteModal.addEventListener('click', () => {
                inviteModal.classList.add('hidden');
            });
            
            cancelInvite.addEventListener('click', () => {
                inviteModal.classList.add('hidden');
            });
            
            sendInvite.addEventListener('click', () => {
                const email = document.getElementById('email').value;
                if (!email) {
                    alert('Please enter an email address');
                    return;
                }
                
                // In a real app, you would send an API request here
                members.push({
                    id: members.length + 1,
                    name: email.split('@')[0],
                    email: email,
                    avatar: `https://ui-avatars.com/api/?name=${encodeURIComponent(email.split('@')[0])}&background=random`,
                    role: selectedRole,
                    status: 'pending',
                    joined: new Date().toISOString().split('T')[0]
                });
                
                document.getElementById('email').value = '';
                renderMembers();
                inviteModal.classList.add('hidden');
                
                // Show success message
                alert(`Invite sent to ${email} as ${selectedRole}`);
            });
            
            closeConfirmModal.addEventListener('click', () => {
                confirmModal.classList.add('hidden');
            });
            
            cancelConfirm.addEventListener('click', () => {
                confirmModal.classList.add('hidden');
            });
            
            confirmAction.addEventListener('click', () => {
                if (currentAction === 'remove') {
                    // Remove member
                    members = members.filter(member => member.id !== currentMemberId);
                    renderMembers();
                }
                confirmModal.classList.add('hidden');
            });
            
            closeTransferModal.addEventListener('click', () => {
                transferModal.classList.add('hidden');
            });
            
            cancelTransfer.addEventListener('click', () => {
                transferModal.classList.add('hidden');
            });
            
            confirmTransfer.addEventListener('click', () => {
                if (!selectedTransferCandidate) return;
                
                // Find the new owner and current owner
                const newOwner = members.find(m => m.id === selectedTransferCandidate);
                const currentOwner = members.find(m => m.role === 'owner');
                
                // Update roles
                newOwner.role = 'owner';
                currentOwner.role = 'admin';
                
                renderMembers();
                transferModal.classList.add('hidden');
                
                // Show success message
                alert(`Ownership transferred to ${newOwner.name}`);
            });
            
            // Role selection
            roleSelectors.forEach(selector => {
                selector.addEventListener('click', () => {
                    // Remove selected class from all
                    roleSelectors.forEach(s => {
                        s.classList.remove('border-blue-500', 'bg-blue-50');
                    });
                    
                    // Add to clicked
                    selector.classList.add('border-blue-500', 'bg-blue-50');
                    selectedRole = selector.dataset.role;
                });
            });
            
            // Set default selected role
            document.querySelector(`.role-selector[data-role="${selectedRole}"]`).classList.add('border-blue-500', 'bg-blue-50');
        });
        
        // Render members list
        function renderMembers() {
            if (members.length === 0) {
                emptyState.classList.remove('hidden');
                membersList.innerHTML = '';
                return;
            }
            
            emptyState.classList.add('hidden');
            
            membersList.innerHTML = members.map(member => `
                <tr class="${member.status === 'pending' ? 'bg-yellow-50' : ''}" data-id="${member.id}">
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 h-10 w-10">
                                <img class="h-10 w-10 rounded-full" src="${member.avatar}" alt="${member.name}">
                            </div>
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-900">${member.name} ${member.role === 'owner' ? '(You)' : ''}</div>
                                <div class="text-sm text-gray-500">${member.email}</div>
                                ${member.status === 'pending' ? '<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">Pending</span>' : ''}
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        ${getRoleBadge(member.role)}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        ${getRoleDescription(member.role)}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        ${getActionButtons(member)}
                    </td>
                </tr>
            `).join('');
            
            // Add event listeners to action buttons
            document.querySelectorAll('.action-remove').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.stopPropagation();
                    currentMemberId = parseInt(button.closest('tr').dataset.id);
                    const member = members.find(m => m.id === currentMemberId);
                    currentAction = 'remove';
                    
                    confirmTitle.textContent = 'Remove Member';
                    confirmMessage.textContent = `Are you sure you want to remove ${member.name} from the team?`;
                    confirmAction.textContent = 'Remove Member';
                    confirmAction.className = 'px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700';
                    
                    confirmModal.classList.remove('hidden');
                });
            });
            
            document.querySelectorAll('.action-transfer').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.stopPropagation();
                    currentMemberId = parseInt(button.closest('tr').dataset.id);
                    
                    // Prepare transfer candidates (all non-owner members)
                    const candidates = members.filter(m => m.id !== currentMemberId && m.role !== 'owner');
                    
                    if (candidates.length === 0) {
                        alert('No eligible members to transfer ownership to');
                        return;
                    }
                    
                    transferCandidates.innerHTML = candidates.map(member => `
                        <li class="px-4 py-2 hover:bg-gray-50 cursor-pointer flex items-center ${selectedTransferCandidate === member.id ? 'bg-blue-50' : ''}" data-id="${member.id}">
                            <img class="h-8 w-8 rounded-full mr-3" src="${member.avatar}" alt="${member.name}">
                            <div>
                                <div class="text-sm font-medium">${member.name}</div>
                                <div class="text-xs text-gray-500">${member.email}</div>
                            </div>
                        </li>
                    `).join('');
                    
                    // Add event listeners to candidate items
                    document.querySelectorAll('#transferCandidates li').forEach(item => {
                        item.addEventListener('click', () => {
                            selectedTransferCandidate = parseInt(item.dataset.id);
                            document.querySelectorAll('#transferCandidates li').forEach(i => {
                                i.classList.remove('bg-blue-50');
                            });
                            item.classList.add('bg-blue-50');
                            confirmTransfer.disabled = false;
                        });
                    });
                    
                    transferModal.classList.remove('hidden');
                    confirmTransfer.disabled = true;
                    selectedTransferCandidate = null;
                });
            });
            
            document.querySelectorAll('.action-change-role').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const memberId = parseInt(button.closest('tr').dataset.id);
                    const member = members.find(m => m.id === memberId);
                    
                    // In a real app, you would show a role selection dropdown
                    const newRole = prompt(`Change role for ${member.name} (admin/editor/viewer):`, member.role);
                    
                    if (newRole && ['admin', 'editor', 'viewer'].includes(newRole.toLowerCase())) {
                        member.role = newRole.toLowerCase();
                        renderMembers();
                        alert(`Role updated to ${newRole}`);
                    }
                });
            });
        }
        
        // Helper functions
        function getRoleBadge(role) {
            const colors = {
                owner: 'bg-purple-100 text-purple-800',
                admin: 'bg-blue-100 text-blue-800',
                editor: 'bg-green-100 text-green-800',
                viewer: 'bg-gray-100 text-gray-800'
            };
            
            const labels = {
                owner: 'Owner',
                admin: 'Admin',
                editor: 'Editor',
                viewer: 'Viewer'
            };
            
            return `<span class="role-pill ${colors[role]}">${labels[role]}</span>`;
        }
        
        function getRoleDescription(role) {
            const descriptions = {
                owner: 'Full access + ownership transfer',
                admin: 'Full access (except ownership)',
                editor: 'Create and edit content',
                viewer: 'View content only'
            };
            
            return descriptions[role];
        }
        
        function getActionButtons(member) {
            if (member.role === 'owner') {
                return `
                    <button class="action-transfer text-blue-600 hover:text-blue-900 mr-3">
                        <i class="fas fa-exchange-alt mr-1"></i> Transfer
                    </button>
                `;
            } else {
                return `
                    <button class="action-change-role text-indigo-600 hover:text-indigo-900 mr-3">
                        <i class="fas fa-user-edit mr-1"></i> Change Role
                    </button>
                    <button class="action-remove text-red-600 hover:text-red-900">
                        <i class="fas fa-user-minus mr-1"></i> Remove
                    </button>
                `;
            }
        }
    </script>
</body>
</html>