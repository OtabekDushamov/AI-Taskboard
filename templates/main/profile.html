{% extends 'base.html' %}

{% block title %}Profile - AI Taskboard{% endblock %}

{% block extra_css %}
<style>
    /* Custom CSS for avatar upload */
    .avatar-upload {
        position: relative;
        width: 120px;
        height: 120px;
        margin: 0 auto;
    }
    
    .avatar-upload .avatar-edit {
        position: absolute;
        right: 0;
        bottom: 0;
        z-index: 1;
    }
    
    .avatar-upload .avatar-edit input {
        display: none;
    }
    
    .avatar-upload .avatar-edit label {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 34px;
        height: 34px;
        margin-bottom: 0;
        border-radius: 100%;
        background: #3b82f6;
        color: white;
        cursor: pointer;
        font-weight: normal;
        transition: all 0.2s ease-in-out;
    }
    
    .avatar-upload .avatar-edit label:hover {
        background: #2563eb;
    }
    
    .avatar-upload .avatar-preview {
        width: 120px;
        height: 120px;
        border-radius: 100%;
        border: 3px solid #e2e8f0;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }
    
    .avatar-upload .avatar-preview > div {
        width: 100%;
        height: 100%;
        border-radius: 100%;
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center;
    }
    
    /* Custom tab styling */
    .tab-content {
        display: none;
    }
    
    .tab-content.active {
        display: block;
        animation: fadeIn 0.3s ease-in-out;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    
    /* Toast notification */
    .toast {
        position: fixed;
        top: 20px;
        right: 20px;
        transform: translateY(-100px);
        opacity: 0;
        transition: all 0.3s ease;
        z-index: 1000;
    }
    
    .toast.show {
        transform: translateY(0);
        opacity: 1;
    }
    
    /* Custom toggle switch */
    .toggle-checkbox:checked {
        right: 0;
        border-color: #3b82f6;
    }
    
    .toggle-checkbox:checked + .toggle-label {
        background-color: #3b82f6;
    }
</style>
{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <!-- Header Section -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <div class="flex flex-col md:flex-row items-center md:items-start space-y-4 md:space-y-0 md:space-x-6">
            <!-- Avatar Upload -->
            <div class="avatar-upload">
                <div class="avatar-edit">
                    <input type='file' id="avatarUpload" accept=".png, .jpg, .jpeg" />
                    <label for="avatarUpload"><i class="fas fa-camera"></i></label>
                </div>
                <div class="avatar-preview">
                    <div id="avatarPreview" style="background-image: url('https://ui-avatars.com/api/?name=John+Doe&background=3b82f6&color=fff&size=120');"></div>
                </div>
            </div>
            
            <!-- User Info -->
            <div class="flex-1 w-full">
                <div class="mb-4">
                    <label for="fullName" class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                    <input type="text" id="fullName" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" value="John Doe">
                </div>
                <div class="mb-4">
                    <label for="username" class="block text-sm font-medium text-gray-700 mb-1">Username</label>
                    <input type="text" id="username" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" value="johndoe">
                </div>
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                    <input type="email" id="email" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" value="john.doe@example.com">
                </div>
            </div>
        </div>
    </div>
    
    <!-- Tabs Navigation -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden mb-6">
        <div class="flex border-b border-gray-200">
            <button class="tab-btn py-4 px-6 font-medium text-sm focus:outline-none border-b-2 border-transparent hover:text-blue-500 transition-colors active" data-tab="general">
                <i class="fas fa-cog mr-2"></i> General
            </button>
            <button class="tab-btn py-4 px-6 font-medium text-sm focus:outline-none border-b-2 border-transparent hover:text-blue-500 transition-colors" data-tab="notifications">
                <i class="fas fa-bell mr-2"></i> Notifications
            </button>
            <button class="tab-btn py-4 px-6 font-medium text-sm focus:outline-none border-b-2 border-transparent hover:text-blue-500 transition-colors" data-tab="integrations">
                <i class="fas fa-plug mr-2"></i> Integrations
            </button>
        </div>
    </div>
    
    <!-- Tab Contents -->
    <div class="tab-contents">
        <!-- General Tab -->
        <div id="general" class="tab-content active bg-white rounded-lg shadow-md p-6">
            <div class="mb-4">
                <label for="locale" class="block text-sm font-medium text-gray-700 mb-1">Locale</label>
                <select id="locale" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <option value="en-US">English (United States)</option>
                    <option value="en-GB">English (United Kingdom)</option>
                    <option value="es-ES">Spanish (Spain)</option>
                    <option value="fr-FR">French (France)</option>
                    <option value="de-DE">German (Germany)</option>
                </select>
            </div>
            
            <div class="mb-4">
                <label for="timezone" class="block text-sm font-medium text-gray-700 mb-1">Timezone</label>
                <select id="timezone" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <option value="UTC-12">UTC-12:00</option>
                    <option value="UTC-8">UTC-08:00 (PST)</option>
                    <option value="UTC-5">UTC-05:00 (EST)</option>
                    <option value="UTC" selected>UTCÂ±00:00 (GMT)</option>
                    <option value="UTC+1">UTC+01:00 (CET)</option>
                    <option value="UTC+8">UTC+08:00 (CST)</option>
                </select>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Working Hours</label>
                <div class="flex items-center space-x-4">
                    <div class="flex-1">
                        <label for="startTime" class="block text-xs text-gray-500 mb-1">Start Time</label>
                        <select id="startTime" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="9:00">9:00 AM</option>
                            <option value="8:00" selected>8:00 AM</option>
                            <option value="7:00">7:00 AM</option>
                        </select>
                    </div>
                    <div class="flex-1">
                        <label for="endTime" class="block text-xs text-gray-500 mb-1">End Time</label>
                        <select id="endTime" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="17:00" selected>5:00 PM</option>
                            <option value="18:00">6:00 PM</option>
                            <option value="19:00">7:00 PM</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Notifications Tab -->
        <div id="notifications" class="tab-content bg-white rounded-lg shadow-md p-6">
            <h3 class="text-lg font-medium text-gray-900 mb-4">Email Notifications</h3>
            <div class="space-y-4 mb-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h4 class="text-sm font-medium text-gray-700">Task Assigned</h4>
                        <p class="text-xs text-gray-500">Receive email when a task is assigned to you</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" class="sr-only peer" checked>
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                    </label>
                </div>
                
                <div class="flex items-center justify-between">
                    <div>
                        <h4 class="text-sm font-medium text-gray-700">Task Due</h4>
                        <p class="text-xs text-gray-500">Receive email when a task is due soon</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" class="sr-only peer" checked>
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                    </label>
                </div>
                
                <div class="flex items-center justify-between">
                    <div>
                        <h4 class="text-sm font-medium text-gray-700">Task Overdue</h4>
                        <p class="text-xs text-gray-500">Receive email when a task is overdue</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" class="sr-only peer" checked>
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                    </label>
                </div>
                
                <div class="flex items-center justify-between">
                    <div>
                        <h4 class="text-sm font-medium text-gray-700">Comments</h4>
                        <p class="text-xs text-gray-500">Receive email when someone comments on your task</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" class="sr-only peer" checked>
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                    </label>
                </div>
            </div>
            
            <h3 class="text-lg font-medium text-gray-900 mb-4">Push Notifications</h3>
            <div class="space-y-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h4 class="text-sm font-medium text-gray-700">Task Assigned</h4>
                        <p class="text-xs text-gray-500">Receive push notification when a task is assigned to you</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" class="sr-only peer">
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                    </label>
                </div>
                
                <div class="flex items-center justify-between">
                    <div>
                        <h4 class="text-sm font-medium text-gray-700">Task Due</h4>
                        <p class="text-xs text-gray-500">Receive push notification when a task is due soon</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" class="sr-only peer" checked>
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                    </label>
                </div>
                
                <div class="flex items-center justify-between">
                    <div>
                        <h4 class="text-sm font-medium text-gray-700">Task Overdue</h4>
                        <p class="text-xs text-gray-500">Receive push notification when a task is overdue</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" class="sr-only peer" checked>
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                    </label>
                </div>
                
                <div class="flex items-center justify-between">
                    <div>
                        <h4 class="text-sm font-medium text-gray-700">Comments</h4>
                        <p class="text-xs text-gray-500">Receive push notification when someone comments on your task</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" class="sr-only peer">
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                    </label>
                </div>
            </div>
        </div>
        
        <!-- Integrations Tab -->
        <div id="integrations" class="tab-content bg-white rounded-lg shadow-md p-6">
            <div class="mb-6">
                <h3 class="text-lg font-medium text-gray-900 mb-2">API Token</h3>
                <p class="text-sm text-gray-500 mb-3">Use this token to authenticate with our API</p>
                <div class="flex items-center">
                    <input type="text" id="apiToken" class="flex-1 px-3 py-2 border border-gray-300 rounded-l-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" value="sk_test_51Hx...3Qp" readonly>
                    <button id="copyToken" class="px-4 py-2 bg-blue-600 text-white rounded-r-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors">
                        <i class="fas fa-copy mr-1"></i> Copy
                    </button>
                </div>
                <p class="text-xs text-gray-500 mt-2">Keep this token secure. Do not share it publicly.</p>
            </div>
            
            <div class="mb-6">
                <h3 class="text-lg font-medium text-gray-900 mb-2">Webhooks</h3>
                <p class="text-sm text-gray-500 mb-3">Configure endpoints to receive real-time updates</p>
                <div class="space-y-3">
                    <div class="flex items-center space-x-2">
                        <input type="text" class="flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="https://example.com/webhook">
                        <button class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors">
                            <i class="fas fa-plus mr-1"></i> Add
                        </button>
                    </div>
                    <div class="text-xs text-gray-500">No webhooks configured yet</div>
                </div>
            </div>
            
            <div>
                <h3 class="text-lg font-medium text-gray-900 mb-2">Calendar Sync</h3>
                <p class="text-sm text-gray-500 mb-3">Connect your calendar to sync tasks and events</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button class="flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors">
                        <i class="fab fa-google text-red-500 text-xl mr-2"></i>
                        <span>Connect Google Calendar</span>
                    </button>
                    <button class="flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors">
                        <i class="fab fa-microsoft text-blue-600 text-xl mr-2"></i>
                        <span>Connect Outlook Calendar</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Save Button -->
    <div class="mt-6 flex justify-end">
        <button id="saveBtn" class="px-6 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors">
            <i class="fas fa-save mr-2"></i> Save Changes
        </button>
    </div>
</div>

<!-- Toast Notification -->
<div id="toast" class="toast">
    <div class="flex items-center bg-green-500 border-l-4 border-green-700 py-2 px-3 shadow-md mb-2">
        <div class="text-green-50 rounded-full bg-green-600 mr-3">
            <i class="fas fa-check-circle p-2"></i>
        </div>
        <div class="text-white max-w-xs">
            <div class="font-semibold">Success!</div>
            <div class="text-sm">Your changes have been saved.</div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Tab switching functionality
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            // Remove active class from all buttons and tabs
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active', 'border-blue-500', 'text-blue-500'));
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            
            // Add active class to clicked button and corresponding tab
            btn.classList.add('active', 'border-blue-500', 'text-blue-500');
            const tabId = btn.getAttribute('data-tab');
            document.getElementById(tabId).classList.add('active');
        });
    });
    
    // Avatar upload preview
    document.getElementById('avatarUpload').addEventListener('change', function(e) {
        if (e.target.files.length) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('avatarPreview').style.backgroundImage = `url(${e.target.result})`;
            };
            reader.readAsDataURL(e.target.files[0]);
        }
    });
    
    // Copy API token to clipboard
    document.getElementById('copyToken').addEventListener('click', function() {
        const tokenInput = document.getElementById('apiToken');
        tokenInput.select();
        document.execCommand('copy');
        
        // Show temporary feedback
        const originalText = this.innerHTML;
        this.innerHTML = '<i class="fas fa-check mr-1"></i> Copied!';
        setTimeout(() => {
            this.innerHTML = originalText;
        }, 2000);
    });
    
    // Save button with toast notification
    document.getElementById('saveBtn').addEventListener('click', function() {
        // Show toast
        const toast = document.getElementById('toast');
        toast.classList.add('show');
        
        // Hide toast after 3 seconds
        setTimeout(() => {
            toast.classList.remove('show');
        }, 3000);
        
        // Simulate save action
        this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Saving...';
        setTimeout(() => {
            this.innerHTML = '<i class="fas fa-save mr-2"></i> Save Changes';
        }, 1500);
    });
    
    // Initialize timezone select
    document.getElementById('timezone').value = 'UTC';
</script>
{% endblock %}